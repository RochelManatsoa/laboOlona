{% extends 'white_label/client1/base.html.twig' %}

{% block title %}
	Annonce | Olona Talents
{% endblock %}
{% block page_title %}Annonce | Olona Talents{% endblock %}


{% block stylesheets %}
	{{ parent() }}
{% endblock %}

{% block body %}
<div class="section-full bg-white">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-md-12">
                <div class="cabdidate-de-info">
                    <div class="view-job-wrap">
                        <div class="view-job-info">
                            <div class="view-job-top">
                                <div class="view_media-bg">
                                    <img src="{{ asset('v2/images/dashboard/fond_annonce_entreprise.webp')}}" class="img-fluid" alt="Societe">
                                    <div class="view_jobs-category green"><span class="view_bg-green">Annonce</span></div>
                                </div>
                                <div class="view_mid-content">
                                    <div class="view_media">
                                        <img src="{{ jobOffer.entreprise.fileName ? asset('uploads/compagnies/' ~ jobOffer.entreprise.fileName) : asset('images/white-label/logoboa.png') }}" alt="#">
                                    </div>
                                    <h4 class="view_job-title">{{ jobOffer.titre }} <span class="view_job-post-duration">/ {{ jobOffer.dateCreation|time_ago }}</span></h4>
                                    <div class="view-job-mid">
                                        <div class="view_job-self-mid-left d-flex">
                                            <span>Budget indicatif :</span>
                                            <div class="view_jobs-amount">
                                                {% if jobOffer.budgetAnnonce is defined and jobOffer.budgetAnnonce is not null %}
                                                    {{ jobOffer.budgetAnnonce.montant }}
                                                    {{jobOffer.budgetAnnonce.devise}}
                                                {% else %}
                                                    {{ jobOffer.salaire }}
                                                    €
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="view_job-apllication-area">Expire le :
                                            <span class="view_job-apllication-date">{{ jobOffer.dateExpiration|date('d/m/Y') }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h4 class="view_s-title">Description :</h4>
                    <div class="view_description-list-2">
                        <p>{{ jobOffer.description|raw }}</p>
                        <h4 class="view_s-title">Compétences requises :</h4>
                        {% if jobOffer.competences|length > 0 %}
                        <ul>
                            {% for skill in jobOffer.competences %}
                                <li>
                                    {{ skill.nom }}
                                </li>
                            {% endfor %}
                        </ul>
                        {% else %}
                            <p>Aucune compétence spécifique requise.</p>
                        {% endif %}
                        <div class="btn-signUp">
                            {% if candidat is defined %}
                                {% if candidat.status is same as(constant('App\\WhiteLabel\\Entity\\Client1\\CandidateProfile::STATUS_VALID')) or candidat.status is same as(constant('App\\WhiteLabel\\Entity\\Client1\\CandidateProfile::STATUS_FEATURED')) %}
                                    {% if not applied %}
                                    <div id="alert-application" class="my-4">
                                        <button type="button" data-bs-toggle="modal" data-bs-target="#submitBtn" class="btn btn-primary">Postuler</button>
                                    </div>
                                    {% else %}
                                    <div class="alert alert-light-primary d-flex align-items-center" role="alert">
                                        <i class="bi bi-info-circle-fill me-1 me-sm-3"></i>
                                        <div>
                                            Vous avez déjà postulé à cette offre
                                        </div>
                                    </div>
                                    {% endif %}
                                {% else %}
                                    <div class="alert alert-info d-flex align-items-center" role="alert">
                                        <i class="bi bi-info-circle-fill me-1 me-sm-3"></i>
                                        <div>
                                            Votre profil doit être validé par un moderateur avant de pouvoir postuler à cette annonce.<br>
                                            Veuillez vérifier régulièrement votre mail
                                        </div>
                                    </div>
                                {% endif %}
                            {% else %}
                                <a data-bs-toggle="modal" data-bs-target="#connectingModal" data-bs-href="{{ path('app_register', {'typology':'Candidat'}) }}" class="btn btn-primary">Postuler</a>
                            {% endif %}
                            {% if app.user and app.user.referrerProfile is not null %}
                            <a href="{{ path('app_referrer_cooptation', {'jobId': jobOffer.jobId}) }}" class="btn btn-primary mx-3 px-3 px-sm-5">Recommander un ami</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                        </div>
                        <div class="col-lg-4 col-md-12 rightSidebar">
				<div class="theiaStickySidebar">
					<div class="side-bar">
						<div class="sidebar-elements search-bx">
                            <div class="view_s-info2-wrap mb-5">
                                <div class="view_s-info2">
                                    <h4 class="section-head-small mb-4">Informations de l'annonce</h4>
                                    <ul class="view_job-hilites">
                                        <li>
                                            <i class="bi bi-circle-fill small mx-2 text-success"></i>
                                            <span class="view_title">{{ getStatuses(jobOffer.status) }}</span>
                                        </li>
                                        <li>
                                            <i class="bi bi-eye"></i>
                                            <span class="view_title">{{ jobOffer.annonceVues|length }} Vues</span>
                                        </li>
                                        <li>
                                            <i class="bi bi-bookmark-check"></i>
                                            <span class="view_title">{{ jobOffer.applications|length }} offres</span>
                                        </li>
                                    </ul>
                                    <h4 class="section-head-small mb-4">Entreprise</h4>
                                    <a href="#">{{ jobOffer.entreprise.nom }}</a>
                                    {% if jobOffer.shortDescription is not null %}
                                        <h4 class="section-head-small my-4">Résumé Olona Talents</h4>
                                        {{ jobOffer.shortDescription|raw }}
                                    {% endif %}
                                </div>
                            </div>
						</div>
					</div>
					<div class="advertisment" style="background-image:url({{ asset('v2/images/coworking-olona-talents.webp')}});">
						<h4 class="title">Rejoignez BANK OF AFRICA</h4>
                        <p>VOUS VOULEZ UNE VIE PROFESSIONNELLE PASSIONNANTE<br>
                        ET ENRICHISSANTE ?</p>
						<div class="btn-signUp">
							<a href="https://boamadagascar.com/institutionnels/travailler-chez-boa/" class="btn btn-primary white">En savoir plus</a> 
						</div>
					</div>
				</div>
			</div>
        </div>
        </div>
</div>
{% include "/tableau_de_bord/layout/_credit_modal_candidat.html.twig" %}
{% if candidat is defined %}
    <div class="modal fade" id="submitBtn" tabindex="-1" aria-labelledby="submitBtnLabel" >
        <div class="modal-dialog  modal-dialog-centered modal-lg">
            <div class="modal-content">
            {{ form_start(form, {'attr': {'id':'applyJob', 'action': path('app_white_label_annonce_view',  {'jobId': jobOffer.jobId })}}) }}
            <div class="modal-header">
                <h1 class="modal-title fs-5 text-center fw-bold" id="submitBtnLabel">Rédigez votre lettre de motivation</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Prenez un moment pour nous parler de vous et de ce qui vous rend unique. Utilisez cet espace pour mettre en avant vos compétences, votre expérience et votre enthousiasme pour le poste auquel vous postulez.</p>
                <div class="col-11 mx-auto">
                    <div class="row">
                    {{ form_widget(form)}}
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary fw-semibold text-uppercase" data-bs-dismiss="modal">Annuler</button>
                <button type="submit" class="btn btn-primary fw-semibold text-uppercase">Envoyer</button>
            </div>
            {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endif %}
{% endblock %}